%h2
  = t(:orders)
%p
  .btn-toolbar
    = link_to new_order_path , :class => "admin-button" do
      %i.icon-plus=  t( :new) + " " + t(:order)
    .btn-group
      = paginate @orders
.row
  .medium-9.columns
    %div
      %table.table.table-striped.table-bordered.table-condensed
        %thead
          %tr
            %th= sort_link @q, :ordered_on
            %th= sort_link @q, :basket_total_price
            %th= sort_link @q, :email
            %th{column_style("order", "state")}
              = sorting_header("order", "state", "")
            %th{:colspan => "2"}
              %label.checkbox
                = pluralize(@order_scope.count, "order")
        %tbody
          - @orders.each do |order|
            %tr{:class => "line-#{cycle("1","2")}"}
              %td{column_style("order", "ordered_on")}
                = order.ordered_on
              %td{column_style("order", "total_price")} 
                = euros(order.basket.total_price)
              %td{column_style("order", "email")}
                = order.email
              %td{column_style("order", "status")}
                = order.paid_on
              %td= link_to t(:show) , order_path(order), :title => t(:show)
              %td= link_to t(:edit) , edit_order_path(order), :title => t(:edit)
      .btn-toolbar
        .btn-group
          = paginate @orders
        .btn-group.pull-right
          = link_to orders_path(:format => :csv), :class => "admin-button" do
            %i.icon-download CSV 
          = link_to orders_path(:format => :json), :class => "admin-button" do
            %i.icon-download JSON 
  .medium-3.columns
    = search_form_for @q, :url => search_orders_path, :html => { :class => "well well-small" }, :method => :post do |f|
      = f.label t(:ordered_on) + t(:between)
      = f.date_field :ordered_on_gt 
      = f.date_field :ordered_on_lt 
      = f.label t(:total) + t(:between)
      = f.text_field :basket_total_price_lt 
      = f.facet_for("email")
      = f.label t(:paid_on) + t(:between)
      = f.date_field :paid_on_gt 
      = f.date_field :paid_on_lt 
      = f.label t(:shipped_on) + t(:between)
      = f.date_field :shipped_on_gt 
      = f.date_field :shipped_on_lt 
      = f.label t(:canceled_on) + t(:between)
      = f.date_field :canceled_on_gt 
      = f.date_field :canceled_on_lt 
      = f.submit t(:filter), :class => "submit-button"
      = link_to  t(:cancel), orders_path, :class => "admin-button"
